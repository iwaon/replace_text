# go言語によるテキストファイルの一括置換プログラム（サンプル）
テキストファイルの中の文字列を、一定のルールに従ってすべて自動的に置換したいと思ったことはありませんか。

簡単な置換であればテキストエディタで開いて、手動で目で確認しながらやれば良いが、対象が何十ファイルにもおよび、適用ルールも何個もあり、対象テキストが長いとなれば、手動では間違いや取りこぼしが発生する可能性が高くなり、そして何よりも労力が半端なくかかってしまいます。

そこで今回は、GO言語 (golang) を使って、テキスト置換を行う方法（コード）を紹介したいと思います。

## 本サンプルコードの構成
- replace.go: 置換作業を行うプログラム本体
- sample.txt: 置換対象のテキストファイル（サンプル）

## 実行方法
本レポジトリのコードをローカルディレクトリにクローンします。

```sh
git clone git@github.com:iwaon/replace_text.git
```

sample.txtは以下のような内容になっています。

```
こんにちは。
GO言語は素晴らしい！
GO! GO!
```

通常、Go言語は、コードをコンパイルしてから、その出来上がったバイナリファイルを実行しますが、コンパイルと実行を一気に行うこともできます。

コマンドプロンプト（Windows）もしくはターミナル（macOS）にて、下記のコマンドを実行してください。

```go
go run replace.go sample.txt
```

すると done と表示されて、実行が完了します。

ここで、sample.txtをダブルクリックして開くと、以下のようになっているはずです。

```
こんにちは。
COME言語は不思議だ！
頑張れ! 頑張れ!
```

## 補足
GO言語において、テキストの置換は `strings.ReplaceAll` によって行います。

- https://pkg.go.dev/strings#ReplaceAll

第1引数に置換対象の文字列が含まれた変数、2番目に置換したい対象の文字列、3番目に何に置換するかを指定します。

GO言語で書くことの利点としては、上から順に実行されるので、優先度の高い置換ルールを上に書いておけば、それから先に実行されるようにすることができます。

たとえば、「GO」を「頑張れ」に置換したいが、「GO言語」だけは「COME言語」に置換したい場合、そのルールを先に書けばいいのです。

これは、秀丸エディタやWord等の他のテキストエディタでは、置換ルールを何回も変えて実行しないと実現できませんが、プログラムで行えば、一発で変換ができるので、便利です。
